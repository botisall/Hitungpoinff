<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hitung Poin ‚Äî By Isall</title>
<link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;600;700&family=Orbitron:wght@400;700;900&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>

<style>
:root{
  --red:#ff1a1a;
  --red2:#cc0000;
  --red3:#ff4444;
  --dark:#0a0a0a;
  --dark2:#111111;
  --dark3:#1a1a1a;
  --dark4:#222222;
  --border:rgba(255,26,26,0.25);
  --gold:#ffd700;
  --silver:#c0c0c0;
  --bronze:#cd7f32;
  --text:#f0f0f0;
  --muted:#888;
}

*{box-sizing:border-box;margin:0;padding:0;}

body{
  font-family:'Inter',sans-serif;
  background:var(--dark);
  color:var(--text);
  min-height:100vh;
  overflow-x:hidden;
}

/* BG Grid */
body::before{
  content:'';
  position:fixed;
  inset:0;
  background-image:
    linear-gradient(rgba(255,26,26,0.04) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,26,26,0.04) 1px, transparent 1px);
  background-size:60px 60px;
  pointer-events:none;
  z-index:0;
}

/* PAGES */
.page{display:none; position:relative; z-index:1;}
.page.active{display:flex; min-height:100vh; flex-direction:column; align-items:center; justify-content:center; padding:24px;}

/* ===== LOGIN ===== */
.login-wrap{
  width:100%;
  max-width:420px;
  perspective:1000px;
}

.login-box{
  background:var(--dark3);
  border:1px solid var(--border);
  border-radius:20px;
  padding:48px 40px 40px;
  position:relative;
  overflow:hidden;
  box-shadow:0 0 80px rgba(255,26,26,0.15), 0 0 0 1px rgba(255,26,26,0.1) inset;
  animation:fadeSlideUp 0.6s ease both;
}

@keyframes fadeSlideUp{
  from{opacity:0; transform:translateY(30px);}
  to{opacity:1; transform:translateY(0);}
}

.login-box::before{
  content:'';
  position:absolute;
  top:-60px; left:50%;
  transform:translateX(-50%);
  width:200px; height:200px;
  background:radial-gradient(circle, rgba(255,26,26,0.25) 0%, transparent 70%);
  pointer-events:none;
}

.login-logo{
  text-align:center;
  margin-bottom:36px;
}

.login-logo .app-name{
  font-family:'Orbitron',monospace;
  font-size:1.1rem;
  font-weight:700;
  letter-spacing:0.3em;
  color:var(--red);
  text-transform:uppercase;
  display:block;
  margin-bottom:8px;
}

.login-logo .title{
  font-family:'Rajdhani',sans-serif;
  font-size:2.6rem;
  font-weight:700;
  line-height:1;
  color:white;
  letter-spacing:-0.01em;
}

.login-logo .title span{color:var(--red);}

.login-logo .sub{
  font-size:0.75rem;
  color:var(--muted);
  letter-spacing:0.15em;
  text-transform:uppercase;
  margin-top:6px;
  display:block;
}

.divider{
  height:1px;
  background:linear-gradient(90deg, transparent, var(--border), transparent);
  margin-bottom:28px;
}

.input-group{
  position:relative;
  margin-bottom:14px;
}

.input-group label{
  display:block;
  font-size:0.7rem;
  font-weight:500;
  color:var(--muted);
  letter-spacing:0.12em;
  text-transform:uppercase;
  margin-bottom:8px;
}

.input-group input{
  width:100%;
  padding:13px 16px 13px 44px;
  background:var(--dark2);
  border:1px solid rgba(255,255,255,0.08);
  border-radius:10px;
  color:white;
  font-family:'Inter',sans-serif;
  font-size:0.95rem;
  outline:none;
  transition:border-color 0.2s, box-shadow 0.2s;
}

.input-group input:focus{
  border-color:var(--red);
  box-shadow:0 0 0 3px rgba(255,26,26,0.12);
}

.input-group .icon{
  position:absolute;
  left:14px; bottom:13px;
  color:var(--muted);
  font-size:1rem;
  pointer-events:none;
}

.btn{
  width:100%;
  padding:13px 20px;
  border:none;
  border-radius:10px;
  font-family:'Rajdhani',sans-serif;
  font-size:1rem;
  font-weight:700;
  letter-spacing:0.1em;
  text-transform:uppercase;
  cursor:pointer;
  transition:all 0.2s;
  position:relative;
  overflow:hidden;
}

.btn::after{
  content:'';
  position:absolute;
  inset:0;
  background:linear-gradient(to bottom, rgba(255,255,255,0.08), transparent);
  pointer-events:none;
}

.btn-primary{
  background:linear-gradient(135deg, var(--red), var(--red2));
  color:white;
  margin-bottom:10px;
  box-shadow:0 4px 20px rgba(255,26,26,0.3);
}

.btn-primary:hover{
  background:linear-gradient(135deg,#ff3333,#dd0000);
  box-shadow:0 6px 28px rgba(255,26,26,0.45);
  transform:translateY(-1px);
}

.btn-secondary{
  background:transparent;
  color:var(--muted);
  border:1px solid rgba(255,255,255,0.1);
  font-size:0.85rem;
}

.btn-secondary:hover{
  border-color:rgba(255,26,26,0.4);
  color:var(--red3);
  background:rgba(255,26,26,0.06);
}

/* ===== TEAM PAGE ===== */
#teamPage.active{justify-content:flex-start; padding-top:40px;}

.section-header{
  text-align:center;
  margin-bottom:30px;
}

.section-header h2{
  font-family:'Rajdhani',sans-serif;
  font-size:1.8rem;
  font-weight:700;
  color:white;
  letter-spacing:0.05em;
}

.section-header p{
  color:var(--muted);
  font-size:0.85rem;
  margin-top:6px;
}

.team-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill, minmax(200px,1fr));
  gap:12px;
  width:100%;
  max-width:900px;
  margin-bottom:24px;
}

.team-grid-item{
  position:relative;
}

.team-grid-item label{
  display:block;
  font-size:0.65rem;
  font-weight:500;
  color:var(--muted);
  letter-spacing:0.12em;
  text-transform:uppercase;
  margin-bottom:6px;
}

.team-grid-item input{
  width:100%;
  padding:10px 14px;
  background:var(--dark3);
  border:1px solid rgba(255,255,255,0.08);
  border-radius:8px;
  color:white;
  font-family:'Inter',sans-serif;
  font-size:0.9rem;
  outline:none;
  transition:border-color 0.2s;
}

.team-grid-item input:focus{
  border-color:var(--red);
  box-shadow:0 0 0 2px rgba(255,26,26,0.1);
}

.action-bar{
  display:flex;
  gap:12px;
  width:100%;
  max-width:900px;
  margin-top:4px;
}

.action-bar .btn{ margin:0; }
.action-bar .btn-primary{flex:2;}
.action-bar .btn-secondary{flex:1;}

/* ===== TABLE PAGE ===== */
#tablePage.active{justify-content:flex-start; padding-top:0; padding:0;}

.top-bar{
  width:100%;
  background:var(--dark2);
  border-bottom:1px solid var(--border);
  padding:14px 24px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  flex-wrap:wrap;
  gap:10px;
  position:sticky;
  top:0;
  z-index:100;
  box-shadow:0 4px 20px rgba(0,0,0,0.5);
}

.top-bar .brand{
  font-family:'Orbitron',monospace;
  font-size:0.85rem;
  font-weight:700;
  letter-spacing:0.2em;
  color:var(--red);
  text-transform:uppercase;
}

.top-actions{display:flex; gap:8px; flex-wrap:wrap;}

.top-actions .btn{
  width:auto;
  padding:9px 18px;
  font-size:0.8rem;
  border-radius:8px;
}

.table-container{
  width:100%;
  padding:24px;
  overflow:auto;
}

.table-wrap{
  background:var(--dark3);
  border:1px solid var(--border);
  border-radius:16px;
  overflow:hidden;
  box-shadow:0 0 40px rgba(0,0,0,0.5);
  overflow-x:auto;
}

table{
  border-collapse:collapse;
  min-width:900px;
  width:100%;
  table-layout:auto;
}

thead{
  background:var(--dark2);
  position:sticky;
  top:0;
  z-index:10;
}

thead tr{
  border-bottom:2px solid var(--border);
}

th{
  font-family:'Rajdhani',sans-serif;
  font-weight:700;
  font-size:0.8rem;
  letter-spacing:0.1em;
  text-transform:uppercase;
  color:var(--muted);
  padding:14px 10px;
  white-space:nowrap;
  border:none;
}

th.match-header{
  color:var(--red3);
}

td{
  padding:11px 10px;
  border:1px solid rgba(255,255,255,0.05);
  text-align:center;
  font-size:0.88rem;
  color:var(--text);
  transition:background 0.15s;
}

tbody tr{
  border-bottom:1px solid rgba(255,255,255,0.04);
  transition:background 0.15s;
}

tbody tr:hover td{background:rgba(255,26,26,0.06);}

td[contenteditable]{
  cursor:text;
  background:rgba(255,255,255,0.02);
  outline:none;
}

td[contenteditable]:focus{
  background:rgba(255,26,26,0.1);
  box-shadow:inset 0 0 0 1px var(--red);
  color:white;
}

.td-no{
  color:var(--muted);
  font-size:0.8rem;
  width:40px;
}

.td-name{
  text-align:left;
  font-family:'Rajdhani',sans-serif;
  font-weight:600;
  font-size:0.95rem;
  letter-spacing:0.02em;
  white-space:nowrap;
}

.td-total{
  font-family:'Rajdhani',sans-serif;
  font-weight:700;
  font-size:1rem;
}

.td-grand{
  font-family:'Orbitron',monospace;
  font-weight:700;
  font-size:1rem;
  color:var(--red3);
}

/* RANK ROWS */
.rank1 td{background:rgba(255,215,0,0.08) !important;}
.rank1 td.td-name{color:var(--gold);}
.rank1:hover td{background:rgba(255,215,0,0.14) !important;}

.rank2 td{background:rgba(192,192,192,0.06) !important;}
.rank2 td.td-name{color:var(--silver);}
.rank2:hover td{background:rgba(192,192,192,0.1) !important;}

.rank3 td{background:rgba(205,127,50,0.06) !important;}
.rank3 td.td-name{color:var(--bronze);}
.rank3:hover td{background:rgba(205,127,50,0.1) !important;}

.rank-badge{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:24px; height:24px;
  border-radius:50%;
  font-size:0.75rem;
  font-weight:700;
  margin-right:6px;
}

.rank1 .rank-badge{background:var(--gold); color:#000;}
.rank2 .rank-badge{background:var(--silver); color:#000;}
.rank3 .rank-badge{background:var(--bronze); color:#fff;}

/* Stats bar */
.stats-strip{
  display:flex;
  gap:20px;
  padding:12px 24px;
  background:var(--dark2);
  border-bottom:1px solid var(--border);
  overflow-x:auto;
}

.stat-item{
  display:flex;
  flex-direction:column;
  gap:2px;
  min-width:100px;
}

.stat-item .label{
  font-size:0.65rem;
  color:var(--muted);
  letter-spacing:0.1em;
  text-transform:uppercase;
}

.stat-item .value{
  font-family:'Rajdhani',sans-serif;
  font-size:1.1rem;
  font-weight:700;
  color:var(--red3);
}

/* Toast */
.toast{
  position:fixed;
  bottom:24px; right:24px;
  background:var(--dark3);
  border:1px solid var(--border);
  border-radius:10px;
  padding:12px 20px;
  font-size:0.85rem;
  color:var(--text);
  z-index:999;
  transform:translateY(20px);
  opacity:0;
  transition:all 0.3s;
  pointer-events:none;
}

.toast.show{transform:translateY(0); opacity:1;}

/* Scrollbar */
::-webkit-scrollbar{width:6px; height:6px;}
::-webkit-scrollbar-track{background:var(--dark);}
::-webkit-scrollbar-thumb{background:rgba(255,26,26,0.3); border-radius:3px;}

@media(max-width:600px){
  .login-box{padding:36px 24px 30px;}
  .login-logo .title{font-size:2rem;}
  .top-actions .btn{font-size:0.72rem; padding:8px 12px;}
}

@media print{
  .top-bar,.stats-strip{display:none;}
  body{background:white; color:black;}
  .table-wrap{border:1px solid #ccc; border-radius:0;}
  td,th{color:black !important; background:white !important;}
}
</style>
</head>
<body>

<!-- LOGIN -->
<div id="loginPage" class="page active">
<div class="login-wrap">
  <div class="login-box">
    <div class="login-logo">
      <span class="app-name">By Isall</span>
      <div class="title">Hitung<span> Poin</span></div>
      <span class="sub">Tournament Score Tracker</span>
    </div>
    <div class="divider"></div>
    <div class="input-group">
      <label>Password Admin</label>
      <span class="icon">üîí</span>
      <input type="password" id="pass" placeholder="Masukkan password‚Ä¶" onkeydown="if(event.key==='Enter')login()">
    </div>
    <button class="btn btn-primary" onclick="login()">Masuk</button>
    <button class="btn btn-secondary" onclick="requestAdmin()">‚ü∂ Request Akses Admin via WhatsApp</button>
  </div>
</div>
</div>

<!-- TEAM INPUT -->
<div id="teamPage" class="page">
  <div class="section-header">
    <h2>Daftar Tim Peserta</h2>
    <p>Isi nama tim ‚Äî boleh dikosongkan (akan terisi otomatis)</p>
  </div>
  <div class="team-grid" id="teamInputs"></div>
  <div class="action-bar">
    <button class="btn btn-secondary" onclick="logout()">Keluar</button>
    <button class="btn btn-primary" onclick="saveTeams()">Simpan & Mulai ‚Üí</button>
  </div>
</div>

<!-- TABLE -->
<div id="tablePage" class="page">
  <div class="top-bar">
    <div class="brand">‚ö° Hitung Poin</div>
    <div class="top-actions">
      <button class="btn btn-primary" onclick="downloadPDF()">‚¨á Download PDF</button>
      <button class="btn btn-secondary" onclick="resetAll()">‚Ü∫ Reset</button>
      <button class="btn btn-secondary" onclick="logout()">Keluar</button>
    </div>
  </div>

  <div class="stats-strip" id="statsStrip"></div>

  <div class="table-container">
    <div class="table-wrap">
      <table id="tabel">
        <thead>
          <tr>
            <th>#</th>
            <th style="text-align:left">Team</th>
            <th class="match-header">M1 Kill</th>
            <th class="match-header">M1 Rank</th>
            <th class="match-header">M1 Pts</th>
            <th class="match-header">M2 Kill</th>
            <th class="match-header">M2 Rank</th>
            <th class="match-header">M2 Pts</th>
            <th class="match-header">M3 Kill</th>
            <th class="match-header">M3 Rank</th>
            <th class="match-header">M3 Pts</th>
            <th>Grand Total</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>

<script>
const PASSWORDS = ["adminA1","adminB2","adminC3","adminD4","adminE5"];
let teams = JSON.parse(localStorage.getItem("teams")) || [];

/* ‚îÄ‚îÄ UTILS ‚îÄ‚îÄ */
function showToast(msg, duration=2200){
  const t = document.getElementById("toast");
  t.textContent = msg;
  t.classList.add("show");
  setTimeout(()=>t.classList.remove("show"), duration);
}

function rankPoint(r){
  const pts={1:12,2:9,3:8,4:7,5:6,6:5,7:4,8:3,9:2,10:1};
  return pts[parseInt(r)] || 0;
}

/* ‚îÄ‚îÄ AUTH ‚îÄ‚îÄ */
function login(){
  const p = document.getElementById("pass").value;
  const device = localStorage.getItem("devicePass");
  if(!PASSWORDS.includes(p)){showToast("‚ùå Password salah!"); return;}
  if(!device){
    localStorage.setItem("devicePass", p);
    localStorage.setItem("admin","yes");
    nextPage();
  } else if(device === p){
    localStorage.setItem("admin","yes");
    nextPage();
  } else {
    showToast("‚ö†Ô∏è Password sudah dipakai di perangkat lain!");
  }
}

function logout(){
  localStorage.removeItem("admin");
  location.reload();
}

function requestAdmin(){
  window.open("https://wa.me/6281234567890?text=Saya%20ingin%20jadi%20admin");
}

/* ‚îÄ‚îÄ NAVIGATION ‚îÄ‚îÄ */
function nextPage(){
  document.getElementById("loginPage").classList.remove("active");
  if(teams.length === 12){
    showTable();
  } else {
    document.getElementById("teamPage").classList.add("active");
    createInputs();
  }
}

function showTable(){
  document.getElementById("teamPage").classList.remove("active");
  document.getElementById("tablePage").classList.add("active");
  renderTable();
}

/* ‚îÄ‚îÄ TEAM INPUT ‚îÄ‚îÄ */
function createInputs(){
  let html = "";
  for(let i=1;i<=12;i++){
    const saved = teams[i-1] ? teams[i-1].name : "";
    html += `
    <div class="team-grid-item">
      <label>Tim ${i}</label>
      <input type="text" placeholder="Nama Tim ${i}" id="team${i}" value="${saved !== 'Team '+i ? saved : ''}">
    </div>`;
  }
  document.getElementById("teamInputs").innerHTML = html;
}

function saveTeams(){
  const prev = JSON.parse(localStorage.getItem("teams")) || [];
  teams = [];
  for(let i=1;i<=12;i++){
    const name = document.getElementById("team"+i).value.trim() || "Team "+i;
    const p = prev[i-1] || {};
    teams.push({
      name,
      k1:p.k1||0, r1:p.r1||0,
      k2:p.k2||0, r2:p.r2||0,
      k3:p.k3||0, r3:p.r3||0
    });
  }
  localStorage.setItem("teams", JSON.stringify(teams));
  showTable();
}

/* ‚îÄ‚îÄ RENDER ‚îÄ‚îÄ */
function renderTable(){
  teams.sort((a,b)=>{
    const ta = (a.k1+rankPoint(a.r1))+(a.k2+rankPoint(a.r2))+(a.k3+rankPoint(a.r3));
    const tb = (b.k1+rankPoint(b.r1))+(b.k2+rankPoint(b.r2))+(b.k3+rankPoint(b.r3));
    return tb - ta;
  });

  let totalKills=0, topTeam='', topScore=0;
  let tbody = "";

  teams.forEach((t,i)=>{
    const m1 = t.k1 + rankPoint(t.r1);
    const m2 = t.k2 + rankPoint(t.r2);
    const m3 = t.k3 + rankPoint(t.r3);
    const total = m1+m2+m3;
    totalKills += t.k1+t.k2+t.k3;
    if(i===0){topTeam=t.name; topScore=total;}

    let rc="";
    let badge="";
    if(i===0){rc="rank1"; badge='<span class="rank-badge">ü•á</span>';}
    else if(i===1){rc="rank2"; badge='<span class="rank-badge">ü•à</span>';}
    else if(i===2){rc="rank3"; badge='<span class="rank-badge">ü•â</span>';}

    tbody += `<tr class="${rc}" data-idx="${i}">
      <td class="td-no">${i+1}</td>
      <td class="td-name">${badge}${t.name}</td>
      <td contenteditable oninput="update(${i},'k1',this)">${t.k1}</td>
      <td contenteditable oninput="update(${i},'r1',this)">${t.r1}</td>
      <td class="td-total">${m1}</td>
      <td contenteditable oninput="update(${i},'k2',this)">${t.k2}</td>
      <td contenteditable oninput="update(${i},'r2',this)">${t.r2}</td>
      <td class="td-total">${m2}</td>
      <td contenteditable oninput="update(${i},'k3',this)">${t.k3}</td>
      <td contenteditable oninput="update(${i},'r3',this)">${t.r3}</td>
      <td class="td-total">${m3}</td>
      <td class="td-grand">${total}</td>
    </tr>`;
  });

  document.querySelector("#tabel tbody").innerHTML = tbody;
  localStorage.setItem("teams", JSON.stringify(teams));

  // Stats strip
  document.getElementById("statsStrip").innerHTML = `
    <div class="stat-item"><div class="label">Tim Terdaftar</div><div class="value">${teams.length}</div></div>
    <div class="stat-item"><div class="label">Pemimpin</div><div class="value">${topTeam||'‚Äî'}</div></div>
    <div class="stat-item"><div class="label">Skor Tertinggi</div><div class="value">${topScore}</div></div>
    <div class="stat-item"><div class="label">Total Kill</div><div class="value">${totalKills}</div></div>
  `;
}

let debounce;
function update(i, key, el){
  const val = parseInt(el.innerText) || 0;
  teams[i][key] = val;
  clearTimeout(debounce);
  debounce = setTimeout(()=>renderTable(), 700);
}

/* ‚îÄ‚îÄ PDF (Excel-style) ‚îÄ‚îÄ */
function downloadPDF(){
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF({orientation:'landscape', unit:'mm', format:'a4'});

  const rankPts = {1:12,2:9,3:8,4:7,5:6,6:5,7:4,8:3,9:2,10:1};
  const sorted = [...teams].sort((a,b)=>{
    const ta=(a.k1+rankPoint(a.r1))+(a.k2+rankPoint(a.r2))+(a.k3+rankPoint(a.r3));
    const tb=(b.k1+rankPoint(b.r1))+(b.k2+rankPoint(b.r2))+(b.k3+rankPoint(b.r3));
    return tb-ta;
  });

  // Title
  doc.setFont("helvetica","bold");
  doc.setFontSize(16);
  doc.setTextColor(200,30,30);
  doc.text("HITUNG POIN ‚Äî BY ISALL", 148.5, 18, {align:"center"});

  doc.setFontSize(8);
  doc.setTextColor(120,120,120);
  doc.setFont("helvetica","normal");
  const now = new Date();
  doc.text(`Dicetak: ${now.toLocaleDateString('id-ID',{weekday:'long',year:'numeric',month:'long',day:'numeric'})}  ${now.toLocaleTimeString('id-ID')}`, 148.5, 24, {align:"center"});

  const head = [["#","Team","M1 Kill","M1 Rank","M1 Pts","M2 Kill","M2 Rank","M2 Pts","M3 Kill","M3 Rank","M3 Pts","Grand Total"]];

  const body = sorted.map((t,i)=>{
    const m1=t.k1+rankPoint(t.r1);
    const m2=t.k2+rankPoint(t.r2);
    const m3=t.k3+rankPoint(t.r3);
    return [i+1, t.name, t.k1, t.r1, m1, t.k2, t.r2, m2, t.k3, t.r3, m3, m1+m2+m3];
  });

  const rankColors = [
    [255,215,0],   // gold
    [210,210,210], // silver
    [205,127,50],  // bronze
  ];

  doc.autoTable({
    head: head,
    body: body,
    startY: 30,
    styles:{
      fontSize:9,
      cellPadding:3,
      halign:'center',
      font:'helvetica',
      lineColor:[220,220,220],
      lineWidth:0.3
    },
    headStyles:{
      fillColor:[30,30,30],
      textColor:[240,240,240],
      fontStyle:'bold',
      fontSize:8.5,
    },
    columnStyles:{
      0:{cellWidth:10, halign:'center'},
      1:{cellWidth:36, halign:'left'},
      2:{cellWidth:16},3:{cellWidth:16},4:{cellWidth:16},
      5:{cellWidth:16},6:{cellWidth:16},7:{cellWidth:16},
      8:{cellWidth:16},9:{cellWidth:16},10:{cellWidth:16},
      11:{cellWidth:22, fontStyle:'bold', textColor:[200,30,30]},
    },
    willDrawCell:(data)=>{
      if(data.section==='body' && data.row.index < 3){
        const c = rankColors[data.row.index];
        doc.setFillColor(c[0],c[1],c[2]);
        doc.rect(data.cell.x, data.cell.y, data.cell.width, data.cell.height, 'F');
        doc.setTextColor(data.row.index===0?20:20,20,20);
      }
    },
    alternateRowStyles:{fillColor:[245,245,245]},
    margin:{left:10, right:10}
  });

  // Footer note
  const finalY = doc.lastAutoTable.finalY + 6;
  doc.setFontSize(7.5);
  doc.setTextColor(150,150,150);
  doc.text("Sistem Poin: Kill = 1pt per kill | Rank 1=12pt, 2=9pt, 3=8pt, 4=7pt, 5=6pt, 6=5pt, 7=4pt, 8=3pt, 9=2pt, 10=1pt", 148.5, finalY, {align:"center"});

  doc.save(`Hitung_Poin_${now.toISOString().slice(0,10)}.pdf`);
  showToast("‚úÖ PDF berhasil diunduh!");
}

/* ‚îÄ‚îÄ RESET ‚îÄ‚îÄ */
function resetAll(){
  if(confirm("Yakin reset semua data tim dan skor?")){
    localStorage.removeItem("teams");
    localStorage.removeItem("devicePass");
    location.reload();
  }
}

/* ‚îÄ‚îÄ AUTO-LOGIN ‚îÄ‚îÄ */
if(localStorage.getItem("admin")==="yes") nextPage();
</script>
</body>
</html>
